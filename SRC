# =============================================
# ğŸ¬ CINEMA UDEARTE - MENÃš PRINCIPAL
# Proyecto Universitario de GestiÃ³n de Cinema
# =============================================

import os
import sys
import time
import re # Se importa pero no se usa aÃºn. Â¡MantÃ©nlo para futuras validaciones de formato!

def limpiar_pantalla():
    """Limpia la pantalla segÃºn el sistema operativo."""
    os.system('cls' if os.name == 'nt' else 'clear')

def mostrar_titulo():
    """Muestra el encabezado del Cinema UDEARTE."""
    print("===============================================")
    print("      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—      ")
    print("     â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—     ")
    print("     â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘     ")
    print("     â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•   â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘     ")
    print("     â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘     ")
    print("      â•šâ•â•â•â•â•â•â•šâ•â•â•šâ•â•  â•šâ•â•â•â•â•šâ•â•â•â•â•â•â• â•šâ•â•     â•šâ•â•â•šâ•â•  â•šâ•â•     ")
    print("===============================================")
    print("       CINEMA UNIVERSITARIO UDEARTE      ")
    print("===============================================\n")

def mostrar_menu():
    """Muestra las opciones principales del sistema."""
    print("Bienvenido al Cinema Universitario UDEARTE\n")
    print("1. Registrar Usuario")
    print("2. Registrar Reserva")
    print("3. Cancelar Reserva")
    print("4. Consultar Funciones Fin de Semana")
    print("5. Administrador")
    print("6. Salir\n")


# =============================================
# ğŸŸï¸ Â MÃ³dulo: Registrar Usuario - CINEMA UDEARTE
# =============================================

def registrar_usuario():
    limpiar_pantalla()
    mostrar_titulo()
    print("\n=== REGISTRO DE USUARIO ===\n")

    # --- Validar nombre ---
    while True:
        nombre = input("Ingrese el nombre: ").strip().title() # Capitaliza la primera letra
        errores = []
        # ValidaciÃ³n: Usar 're' para validar que solo haya letras y espacios si se desea
        # if not re.match(r"^[a-zA-ZÃ¡Ã©Ã­Ã³ÃºÃÃ‰ÃÃ“ÃšÃ±Ã‘\s]+$", nombre):
        #    errores.append("âŒ El nombre solo debe contener letras.")
        if len(nombre) < 3:
            errores.append("âŒ El nombre debe tener al menos 3 letras.")
        if any(char.isdigit() for char in nombre):
            errores.append("âŒ El nombre no puede contener nÃºmeros.")
        if errores:
            print("\n".join(errores), "\nIntente de nuevo.\n")
            continue
        break

    # --- Validar apellido ---
    while True:
        apellido = input("Ingrese el apellido: ").strip().title() # Capitaliza la primera letra
        errores = []
        if len(apellido) < 3:
            errores.append("âŒ El apellido debe tener al menos 3 letras.")
        if any(char.isdigit() for char in apellido):
            errores.append("âŒ El apellido no puede contener nÃºmeros.")
        if errores:
            print("\n".join(errores), "\nIntente de nuevo.\n")
            continue
        break

    # --- Validar documento ---
    while True:
        documento = input("Ingrese el nÃºmero de documento: ").strip()
        errores = []
        if not documento.isdigit():
            errores.append("âŒ El documento solo debe contener nÃºmeros.")
        if len(documento) < 3 or len(documento) > 15:
            errores.append("âŒ El documento debe tener entre 3 y 15 dÃ­gitos.")
        if errores:
            print("\n".join(errores), "\nIntente de nuevo.\n")
            continue
        break

    # --- Seleccionar tipo de vÃ­nculo ---
    tipos_vinculo = {
        "1": ("Estudiante", 7500),
        "2": ("Docente", 10000),
        "3": ("Administrativo", 8500),
        "4": ("Oficial interno", 7000),
        "5": ("PÃºblico externo", 15000)
    }

    print("\nSeleccione el tipo de vÃ­nculo:")
    for clave, (tipo, valor) in tipos_vinculo.items():
        # Formato de miles mejorado
        print(f"{clave}. {tipo.ljust(15)} â†’ ${valor:,}") 

    while True:
        opcion = input("\nIngrese el nÃºmero correspondiente: ").strip()
        if opcion not in tipos_vinculo:
            print("âŒ OpciÃ³n no vÃ¡lida. Por favor, seleccione una opciÃ³n del 1 al 5.\n")
            continue
        tipo_vinculo, valor_tiquete = tipos_vinculo[opcion]
        break

    # --- Mostrar resumen del usuario registrado ---
    print("\n" + "="*40)
    print("âœ… Usuario registrado exitosamente:")
    print(f"Nombre completo Â  : {nombre} {apellido}")
    print(f"Documento Â  Â  Â  Â  : {documento}")
    print(f"Tipo de vÃ­nculo Â  : {tipo_vinculo}")
    print(f"Valor del tiquete : ${valor_tiquete:,}")
    print("="*40)
    print("\nGracias por registrarse en el Cinema UDEARTE ğŸ¬")

    time.sleep(2)
    input("\nPresiona Enter para volver al menÃº principal...")

    # Retorna los datos por si se desean usar en otro mÃ³dulo
    return {
        "nombre": nombre,
        "apellido": apellido,
        "documento": documento,
        "vinculo": tipo_vinculo,
        "valor_tiquete": valor_tiquete
    }


def pausar():
    """Pausa la ejecuciÃ³n hasta que el usuario presione Enter."""
    input("\nPresiona Enter para continuar...")

def main():
    """FunciÃ³n principal del programa."""
    # Declarar 'usuario' antes del bucle para que estÃ© disponible globalmente (si se necesita)
    usuario = None 

    while True:
        limpiar_pantalla()
        mostrar_titulo()
        mostrar_menu()
        
        try:
            opcion = int(input("Selecciona una opciÃ³n (1-6): "))
        except ValueError:
            print("\nâš ï¸  Por favor ingresa un nÃºmero vÃ¡lido (1 al 6).")
            time.sleep(1.5)
            continue

        # El bloque de IF/ELIF/ELSE DEBE estar aquÃ­ DENTRO del 'while True'
        if opcion == 1:
            # No es necesario el print aquÃ­, ya que registrar_usuario() limpia y muestra su propio tÃ­tulo.
            usuario = registrar_usuario()
        elif opcion == 2:
            print("\nğŸ‘‰ OpciÃ³n 2: Registrar Reserva")
            # AquÃ­ podrÃ­as usar 'usuario' si estÃ¡ registrado
            pausar()
        elif opcion == 3:
            print("\nğŸ‘‰ OpciÃ³n 3: Cancelar Reserva")
            pausar()
        elif opcion == 4:
            print("\nğŸ‘‰ OpciÃ³n 4: Consultar Funciones Fin de Semana")
            pausar()
        elif opcion == 5:
            print("\nğŸ‘‰ OpciÃ³n 5: Administrador")
            pausar()
        elif opcion == 6:
            print("\nğŸ‘‹ Gracias por usar el Cinema UDEARTE. Â¡Hasta pronto!")
            time.sleep(1.5)
            limpiar_pantalla()
            sys.exit()
        else:
            print("\nâš ï¸  OpciÃ³n fuera de rango. Intenta nuevamente.")
            time.sleep(1.5)

# Punto de entrada del programa
if __name__ == "__main__":
    main()
